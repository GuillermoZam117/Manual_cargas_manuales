<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Manual de Usuario ¬∑ Gu√≠as Est√°ndar y Cargas Manuales</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- üé®  Hojas de estilo corporativas (Material‚ÄëTheme + overrides) -->
  <link rel="stylesheet" href="css/portal-theme.css" />
  <link rel="stylesheet" href="css/project-overrides.css" />
  <link rel="stylesheet" href="css/project-styles.css" />
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined" rel="stylesheet" />

  <style>
    :root{
      --ryder-red:#c8102e;           /* rojo corporativo */
      --sidebar-w:260px;             /* ancho men√∫ */
      --header-h:60px;               /* alto topbar */
      --bg:#f4f5f7;                 /* gris fondo */
      --radius:6px;                 /* radios generales */
      --content-w:1200px;            /* ancho m√°ximo de contenido */
      --content-pad:28px;            /* sangr√≠a segura lateral */
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{font-family:Roboto,Arial,Helvetica,sans-serif;background:var(--bg);color:#111;line-height:1.46}
    img{max-width:100%;display:block;border-radius:var(--radius)}
    a{color:inherit;text-decoration:none}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOPBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    header.topbar{position:fixed;inset:0 0 auto 0;height:var(--header-h);display:flex;align-items:center;padding:0 1rem;background:#fff;box-shadow:0 2px 4px #0001;z-index:200}
    .hamburger{border:none;background:none;cursor:pointer;color:#000;padding:.25rem;display:inline-flex;align-items:center}
    .hamburger .material-icons{font-size:28px}
    .brand{display:flex;align-items:center;margin-left:.5rem}
    .brand img{height:36px}
    .search-box{flex:0 0 340px;margin-left:auto;position:relative}
    .search-box input{width:100%;padding:.5rem 2.2rem .5rem .9rem;font-size:.9rem;border:1px solid #d1d5db;border-radius:4px}
    .search-box button{position:absolute;right:.35rem;top:50%;transform:translateY(-50%);border:none;background:#f3f4f6;border:1px solid #e5e7eb;border-radius:16px;width:24px;height:24px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}
    .search-box button .material-icons{font-size:16px;color:#374151}
    .search-box button:hover{background:#e5e7eb}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    aside.sidebar{position:fixed;top:var(--header-h);left:0;width:var(--sidebar-w);height:calc(100vh - var(--header-h));background:var(--ryder-red);color:#fff;overflow-y:auto;transition:width .25s}
    aside.sidebar.collapsed{width:60px}
    .side-title{font-size:1.05rem;font-weight:600;padding:1.1rem .9rem 1rem}
    nav.side-links{display:flex;flex-direction:column}
    nav.side-links a{display:flex;align-items:center;gap:.75rem;padding:.65rem .95rem;border-left:3px solid transparent;font-size:.87rem;white-space:nowrap;transition:background .15s,border-color .15s}
    nav.side-links a:hover{background:#ffffff22}
    nav.side-links a.active{background:#ffffff33;border-color:#fff;font-weight:600}
    .icon{display:inline-flex;min-width:24px;justify-content:center}
    .icon .material-icons-outlined{font-size:20px;color:#fff}
    aside.sidebar.collapsed span.label{display:none}
    aside.sidebar.collapsed .side-title{display:none}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CONTENIDO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    main{margin-left:var(--sidebar-w);padding:calc(var(--header-h)+1.8rem) 1.6rem 2.6rem 3rem;transition:margin-left .25s}
    aside.sidebar.collapsed+main{margin-left:60px}
    main h2{margin:2rem 0 1rem;font-size:1.75rem;color:var(--ryder-red)}
    main h3{margin:1.5rem 0 .75rem;font-size:1.25rem;color:#374151}
    /* ancho seguro y centrado por secci√≥n */
    main>section{max-width:var(--content-w);margin-left:auto;margin-right:auto;padding-left:var(--content-pad);padding-right:var(--content-pad)}

    /* ‚ô• utilidades */
    .grid{display:grid;gap:1rem}
    .grid-cols-3{grid-template-columns:repeat(auto-fill,minmax(320px,1fr))}
    .grid-cols-2{grid-template-columns:repeat(auto-fill,minmax(420px,1fr))}
    .figure-card{background:#fff;border:1px solid #e1e4e8;border-radius:var(--radius);box-shadow:0 1px 3px #0002;overflow:hidden}
    .figure-card img{cursor:zoom-in}
    .figure-card figcaption{background:#f3f4f6;padding:.35rem .5rem;font-size:.78rem;text-align:center}
    table{width:100%;border-collapse:collapse;background:#fff;margin-top:1rem}
    th,td{border:1px solid #d1d5db;padding:.5rem;font-size:.8rem;text-align:left}
    thead{background:#e5e7eb;font-weight:600}
    ol{margin-left:1.25rem}
    .callout{background:#fff3cd;border-left:4px solid #f59e0b;padding:.75rem 1rem;margin:.75rem 0;border-radius:4px}

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center;z-index:999;padding:2rem}
    .lightbox.open{display:flex}
    .lightbox img{max-width:90vw;max-height:85vh;border-radius:8px;box-shadow:0 10px 30px #0007}
    .lightbox .caption{color:#fff;text-align:center;margin-top:.75rem;max-width:90vw}
  </style>
</head>
<body>
  <!-- ‚ñë‚ñë‚ñë TOPBAR ‚ñë‚ñë‚ñë -->
  <header class="topbar">
    <button class="hamburger" id="btnHamburger" aria-label="Plegar men√∫"><span class="material-icons">menu</span></button>
    <div class="brand"><img src="img/RyderLogo.svg" alt="Ryder"></div>
    <div class="search-box"><input type="search" id="searchInput" placeholder="Buscar en el manual‚Ä¶"></div>
  </header>

  <!-- ‚ñë‚ñë‚ñë SIDEBAR ‚ñë‚ñë‚ñë -->
  <aside class="sidebar" id="sidebar">
    <div class="side-title">Manual de Usuario</div>
    <nav class="side-links" id="navLinks">
      <a href="#overview"><span class="icon"><span class="material-icons-outlined">home</span></span><span class="label">Visi√≥n¬†General</span></a>
      <a href="#getting-started" class="active"><span class="icon"><span class="material-icons-outlined">rocket_launch</span></span><span class="label">Primeros¬†Pasos</span></a>
      <a href="#architecture"><span class="icon"><span class="material-icons-outlined">account_tree</span></span><span class="label">Arquitectura</span></a>
      <a href="#clients"><span class="icon"><span class="material-icons-outlined">people</span></span><span class="label">Clientes</span></a>
      <a href="#users"><span class="icon"><span class="material-icons-outlined">badge</span></span><span class="label">Usuarios</span></a>
      <a href="#roles"><span class="icon"><span class="material-icons-outlined">admin_panel_settings</span></span><span class="label">Roles</span></a>
      <a href="#account"><span class="icon"><span class="material-icons-outlined">person</span></span><span class="label">Cuenta</span></a>
      <a href="#security"><span class="icon"><span class="material-icons-outlined">lock</span></span><span class="label">Seguridad</span></a>
      <a href="#upload"><span class="icon"><span class="material-icons-outlined">upload</span></span><span class="label">Cargas</span></a>
      <a href="#validation"><span class="icon"><span class="material-icons-outlined">task_alt</span></span><span class="label">Validaciones</span></a>
      <a href="#catalogs-wms"><span class="icon"><span class="material-icons-outlined">view_list</span></span><span class="label">Cat√°logos WMS</span></a>
      <a href="#catalogs-tms"><span class="icon"><span class="material-icons-outlined">dataset</span></span><span class="label">Cat√°logos TMS</span></a>
      <a href="#parameters"><span class="icon"><span class="material-icons-outlined">tune</span></span><span class="label">Par√°metros</span></a>
      <a href="#integration"><span class="icon"><span class="material-icons-outlined">hub</span></span><span class="label">Integraci√≥n/API</span></a>
      <a href="#admin"><span class="icon"><span class="material-icons-outlined">settings</span></span><span class="label">Administraci√≥n</span></a>
      <a href="#relations"><span class="icon"><span class="material-icons-outlined">account_tree</span></span><span class="label">Relaciones</span></a>
      <a href="#glossary"><span class="icon"><span class="material-icons-outlined">menu_book</span></span><span class="label">Glosario</span></a>
      <a href="#data-dictionary"><span class="icon"><span class="material-icons-outlined">table_view</span></span><span class="label">Diccionario de datos</span></a>
      <a href="#support"><span class="icon"><span class="material-icons-outlined">support_agent</span></span><span class="label">Soporte</span></a>
      <a href="#troubleshooting"><span class="icon"><span class="material-icons-outlined">bug_report</span></span><span class="label">Soluci√≥n de problemas</span></a>
      <a href="#faq"><span class="icon"><span class="material-icons-outlined">help</span></span><span class="label">FAQ</span></a>
    </nav>
  </aside>

  <main>
    <!-- ‚ïê‚ïê‚ïê Visi√≥n general ‚ïê‚ïê‚ïê -->
    <section id="overview">
      <h2>Visi√≥n General</h2>
      <p>Portal unificado que combina los m√≥dulos <em>Gu√≠as¬†Est√°ndar</em> y <em>Cargas¬†Manuales</em> sobre .NET¬†8. Navega por el men√∫ lateral (plegable) para acceder a cada apartado.</p>
      <h3>Men√∫ lateral plegable</h3>
      <p>El men√∫ lateral puede <strong>plegarse</strong> para ganar espacio o <strong>desplegarse</strong> para navegar por secciones.</p>
      <div class="grid grid-cols-2">
        <figure class="figure-card"><img src="img/menu-expanded.png" alt="Men√∫ lateral desplegado"><figcaption>Men√∫ desplegado con todas las secciones visibles</figcaption></figure>
        <figure class="figure-card"><img src="img/menu-collapsed.png" alt="Men√∫ lateral plegado"><figcaption>Men√∫ plegado para maximizar el √°rea de trabajo</figcaption></figure>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Primeros Pasos ‚ïê‚ïê‚ïê -->
    <section id="getting-started">
      <h2>Primeros Pasos</h2>
      <div class="callout"><strong>Requisitos:</strong> tener usuario activo, archivos de carga con la plantilla vigente y permisos seg√∫n rol.</div>
      <ol>
        <li>Visita <code>https://www.arensodev.com.mx:8601</code>.</li>
        <li>Inicia sesi√≥n con tus credenciales.</li>
        <li>Selecciona el m√≥dulo <strong>Gu√≠as Est√°ndar</strong> o <strong>Cargas Manuales</strong> seg√∫n tu tarea.</li>
      </ol>
      <p>Tras autenticarte, selecciona el m√≥dulo que necesitas para trabajar.</p>
      <div class="grid grid-cols-3">
        <figure class="figure-card"><img src="img/home.png" alt="Pantalla de bienvenida despu√©s de iniciar sesi√≥n"><figcaption>Bienvenida con accesos a m√≥dulos</figcaption></figure>
        <figure class="figure-card"><img src="img/login.png" alt="Pantalla de login con usuario y contrase√±a"><figcaption>Inicio de sesi√≥n seguro</figcaption></figure>
        <figure class="figure-card"><img src="img/menu-guias.png" alt="Pantalla de selecci√≥n de m√≥dulos"><figcaption>Selecciona Gu√≠as o Cargas Manuales</figcaption></figure>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Arquitectura ‚ïê‚ïê‚ïê -->
    <section id="architecture">
      <h2>Arquitectura</h2>
      <table>
        <thead><tr><th>Capa</th><th>Responsabilidad</th><th>Tecnolog√≠as</th></tr></thead>
        <tbody>
          <tr><td>UI (SPA)</td><td>Interfaz responsiva</td><td>Angular¬†17 ¬∑ Material¬†17</td></tr>
          <tr><td>API¬†Gateway</td><td>Seguridad & routing</td><td>.NET¬†8¬†Web¬†API ¬∑ JWT</td></tr>
          <tr><td>Servicios</td><td>L√≥gica de negocio</td><td>Microservicios¬†.NET¬†8 ¬∑ MediatR¬†/¬†CQRS</td></tr>
          <tr><td>Integraci√≥n</td><td>EDI¬†/ WS</td><td>RabbitMQ ¬∑ Azure¬†Functions</td></tr>
          <tr><td>Data</td><td>Persistencia</td><td>SQL¬†Server¬†2022 ¬∑ EF¬†Core¬†8</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ‚ïê‚ïê‚ïê Clientes ‚ïê‚ïê‚ïê -->
    <section id="clients">
      <h2>Clientes</h2>
      <p>Cat√°logo con b√∫squeda, alta, edici√≥n, asignaci√≥n de interfaces y baja l√≥gica.</p>
      <h3>Objetivo</h3>
      <p>Administrar el maestro de clientes asegurando consistencia de datos para su uso en interfaces y procesos de carga.</p>
      <h3>Flujo</h3>
      <ol>
        <li><strong>Crear cliente</strong>: registra raz√≥n social, RFC, contactos y estatus. Verifica duplicados por RFC.</li>
        <li><strong>Asignar interfaces</strong>: relaciona las interfaces habilitadas (EDI/WS) y par√°metros por cliente.</li>
        <li><strong>Editar datos</strong>: actualiza informaci√≥n operativa (direcciones, SLA, contacto).</li>
        <li><strong>Baja l√≥gica</strong>: desactiva al cliente para bloquear nuevas cargas sin perder hist√≥rico.</li>
      </ol>
      <div class="callout"><strong>Buenas pr√°cticas:</strong> valida RFC y contactos antes de crear; documenta cambios relevantes en el campo notas.</div>
      <p>Desde aqu√≠ gestionas la informaci√≥n maestra de clientes y sus interfaces.</p>
      <div class="grid grid-cols-3">
        <figure class="figure-card"><img src="img/5599a85d-7a35-45f4-9ad8-65848709fb75.png" alt="Lista de clientes"><figcaption>P√°gina¬†principal</figcaption></figure>
        <figure class="figure-card"><img src="img/46560acb-3a63-4025-8f6f-5a6e0236fb81.png" alt="Formulario para dar de alta un cliente"><figcaption>Alta de cliente</figcaption></figure>
        <figure class="figure-card"><img src="img/c8fd3eaa-e8e5-4026-9fd3-7311f6481c86.png" alt="Edici√≥n de datos del cliente"><figcaption>Edici√≥n de cliente</figcaption></figure>
        <figure class="figure-card"><img src="img/de87ae7b-0705-4463-9b8c-49aeb13c871b.png" alt="Borrar cliente"><figcaption>Baja¬†de¬†cliente</figcaption></figure>
        <figure class="figure-card"><img src="img/df2175d5-c82e-44d2-90b4-5cae72170b5e.png" alt="Asignar interfaces"><figcaption>Asignar¬†interfaces</figcaption></figure>
        <figure class="figure-card"><img src="img/c76ec68b-9000-471a-b91a-6d7b123166cd.png" alt="Interfaces configuradas"><figcaption>Interfaces¬†configuradas</figcaption></figure>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Usuarios ‚ïê‚ïê‚ïê -->
    <section id="users">
      <h2>Usuarios</h2>
      <p>Alta, edici√≥n y baja de cuentas.</p>
      <h3>Objetivo</h3>
      <p>Gestionar accesos y privilegios alineados al principio de m√≠nimo privilegio.</p>
      <h3>Flujo</h3>
      <ol>
        <li><strong>Crear</strong>: define nombre, correo corporativo y rol (Administrador, Operador, Consulta).</li>
        <li><strong>Editar</strong>: restablece contrase√±a, bloquea/desbloquea usuario, ajusta rol.</li>
        <li><strong>Desactivar</strong>: aplica baja l√≥gica conservando trazabilidad.</li>
      </ol>
      <div class="callout"><strong>Seguridad:</strong> usa correos corporativos; evita cuentas compartidas; obliga cambio de contrase√±a al primer ingreso.</div>
      <p>Controla el ciclo de vida de cuentas internas y sus privilegios.</p>
      <div class="grid grid-cols-3">
        <figure class="figure-card"><img src="img/bdcedbb3-76da-4b0f-a40b-c3ba914c027a.png" alt="Lista de usuarios"><figcaption>P√°gina¬†principal</figcaption></figure>
        <figure class="figure-card"><img src="img/422aa45a-a02c-450b-b68c-5aa898bc8618.png" alt="Formulario para crear un nuevo usuario"><figcaption>Nuevo¬†usuario</figcaption></figure>
        <figure class="figure-card"><img src="img/a4bc429b-c546-4499-9b99-523c36f2b06d.png" alt="Edici√≥n del perfil de un usuario"><figcaption>Editar¬†usuario</figcaption></figure>
        <figure class="figure-card"><img src="img/5e140031-e503-4013-afc8-a88db77bee60.png" alt="Baja usuario"><figcaption>Baja¬†de¬†usuario</figcaption></figure>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Roles y permisos ‚ïê‚ïê‚ïê -->
    <section id="roles">
      <h2>Roles y Permisos</h2>
      <table>
        <thead><tr><th>Rol</th><th>Descripci√≥n</th><th>Permisos clave</th></tr></thead>
        <tbody>
          <tr><td>Administrador</td><td>Configura el sistema y gestiona usuarios.</td><td>CRUD usuarios, par√°metros, interfaces, cargas.</td></tr>
          <tr><td>Operador</td><td>Ejecuta procesos diarios.</td><td>Subir archivos, validar, consultar resultados.</td></tr>
          <tr><td>Consulta</td><td>Visualiza informaci√≥n.</td><td>Reportes y seguimiento, sin cambios.</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ‚ïê‚ïê‚ïê Cuenta de usuario ‚ïê‚ïê‚ïê -->
    <section id="account">
      <h2>Cuenta de Usuario</h2>
      <div class="callout"><strong>Tip:</strong> mant√©n tus datos actualizados y cambia tu contrase√±a cada 90 d√≠as.</div>
      <div class="grid grid-cols-3">
        <figure class="figure-card"><img src="img/87dcda71-6eba-4aa5-afb8-f266073ec4e2.png" alt="Perfil de usuario"><figcaption>Perfil de usuario</figcaption></figure>
        <figure class="figure-card"><img src="img/78d32921-3730-4e3c-8827-d1a2ed3dedef.png" alt="Preferencias"><figcaption>Preferencias</figcaption></figure>
        <figure class="figure-card"><img src="img/665cf9c0-f354-4ad7-a352-1230b83f4fa5.png" alt="Cambio de contrase√±a"><figcaption>Cambio de contrase√±a</figcaption></figure>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Seguridad y sesi√≥n ‚ïê‚ïê‚ïê -->
    <section id="security">
      <h2>Seguridad y Sesi√≥n</h2>
      <ul>
        <li>Autenticaci√≥n con cifrado de contrase√±a y token de sesi√≥n.</li>
        <li>Cierre de sesi√≥n forzado al expirar la sesi√≥n o al reingresar.</li>
        <li>Pol√≠tica de contrase√±as: longitud m√≠nima, complejidad y caducidad.</li>
      </ul>
      <h3>Detalles t√©cnicos</h3>
      <ul>
        <li>Las contrase√±as se almacenan en forma encriptada. En login se cifra el valor y se valida en backend.</li>
        <li>Al iniciar sesi√≥n se genera un token de sesi√≥n (similar a JWT) usado en las llamadas al API.</li>
        <li>La sesi√≥n expira por inactividad; tras expirar, se redirige a la pantalla de login.</li>
        <li>Toda actividad sensible (altas, ediciones, bajas) queda registrada en auditor√≠a.</li>
      </ul>
    </section>

    <!-- ‚ïê‚ïê‚ïê Cargas manuales ‚ïê‚ïê‚ïê -->
    <section id="upload">
      <h2>Cargas Manuales</h2>
      <p>Sube archivos en formato CSV/Excel. El sistema valida estructura y datos antes de procesar.</p>
      <h3>Prerrequisitos</h3>
      <ul>
        <li>Plantilla oficial (columnas y tipos correctos).</li>
        <li>Archivo sin hojas ocultas ni celdas combinadas (para XLSX).</li>
        <li>Codificaci√≥n UTF‚Äë8 (para CSV) y separador coma.</li>
      </ul>
      <h3>Flujo</h3>
      <ol>
        <li><strong>Selecciona archivo</strong>: adjunta el CSV/XLSX de acuerdo con la plantilla vigente.</li>
        <li><strong>Vista previa</strong>: revisa registros, corrige filas con errores y vuelve a subir si es necesario.</li>
        <li><strong>Confirmaci√≥n</strong>: ejecuta la carga; al finalizar, consulta el resumen y los folios de proceso.</li>
      </ol>
      <h3>Validaciones clave</h3>
      <ul>
        <li>Campos obligatorios no vac√≠os y tipos correctos.</li>
        <li>Referenciales: cliente/usuario/ interfaz existentes y activos.</li>
        <li>Reglas de negocio: rangos, formatos, duplicados.</li>
      </ul>
      <h3>M√©tricas y resultados</h3>
      <table>
        <thead><tr><th>M√©trica</th><th>Descripci√≥n</th></tr></thead>
        <tbody>
          <tr><td>Total registros</td><td>Cantidad de filas le√≠das desde el archivo.</td></tr>
          <tr><td>Errores</td><td>N√∫mero de filas rechazadas por validaci√≥n.</td></tr>
          <tr><td>Aceptados</td><td>N√∫mero de filas que avanzan a procesamiento.</td></tr>
        </tbody>
      </table>
      <div class="grid grid-cols-3">
        <figure class="figure-card"><img src="img/76a847c1-2470-4432-9593-994e509a3c03.png" alt="Selecci√≥n de archivo"><figcaption>Selecci√≥n de archivo</figcaption></figure>
        <figure class="figure-card"><img src="img/9a3007e3-7894-4631-af25-25926497a953.png" alt="Validaci√≥n previa"><figcaption>Validaci√≥n previa</figcaption></figure>
        <figure class="figure-card"><img src="img/e8e9d42c-1028-4618-a78f-839ae3aaf9c1.png" alt="Resumen de carga"><figcaption>Resumen de carga</figcaption></figure>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Validaciones ‚ïê‚ïê‚ïê -->
    <section id="validation">
      <h2>Validaciones</h2>
      <p>Se aplican reglas de negocio y validaciones de formato para evitar inconsistencias.</p>
      <h3>Tipos de validaci√≥n</h3>
      <ul>
        <li><strong>Estructura</strong>: columnas, encabezados y tipos.</li>
        <li><strong>Dominio</strong>: cat√°logos y valores permitidos.</li>
        <li><strong>Integridad</strong>: claves y relaciones referenciales.</li>
        <li><strong>Negocio</strong>: reglas espec√≠ficas por cliente y operaci√≥n.</li>
      </ul>
      <h3>Estados de registro</h3>
      <table>
        <thead><tr><th>Estado</th><th>Descripci√≥n</th><th>Acci√≥n sugerida</th></tr></thead>
        <tbody>
          <tr><td>Pendiente</td><td>En cola de validaci√≥n o proceso.</td><td>Espera.</td></tr>
          <tr><td>Con errores</td><td>No cumple estructura o reglas.</td><td>Corrige y reintenta.</td></tr>
          <tr><td>Procesado</td><td>Cargado correctamente.</td><td>Ninguna.</td></tr>
        </tbody>
      </table>
      <div class="callout"><strong>Consejo:</strong> prioriza la correcci√≥n de errores de estructura; los de negocio suelen ser contextuales y requerir√°n revisi√≥n con el √°rea funcional.</div>
      <div class="grid grid-cols-3">
        <figure class="figure-card"><img src="img/df6571da-6951-478f-8708-85ab96caf9d8.png" alt="Errores de estructura"><figcaption>Errores de estructura</figcaption></figure>
        <figure class="figure-card"><img src="img/5a44c315-6371-4d21-b7a1-1460a02f706a.png" alt="Reglas de negocio"><figcaption>Reglas de negocio</figcaption></figure>
        <figure class="figure-card"><img src="img/422aa45a-a02c-450b-b68c-5aa898bc8618.png" alt="Resultados de validaci√≥n"><figcaption>Resultados de validaci√≥n</figcaption></figure>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Cat√°logos WMS ‚ïê‚ïê‚ïê -->
    <section id="catalogs-wms">
      <h2>Cat√°logos WMS</h2>
      <p>Tablas maestras editables con operaciones CRUD y validaciones de campos.</p>
      <h3>Unidad de Medida (WMS - UoM)</h3>
      <ul>
        <li>Campos: C√≥digo, Descripci√≥n.</li>
        <li>Acciones: Agregar/Editar via modal, Eliminar si no hay uso.</li>
      </ul>
      <h3>Pantalla principal</h3>
      <ul>
        <li>Selector de sistema (WMS/TMS) y cat√°logo.</li>
        <li>Grid con filtros y paginaci√≥n.</li>
      </ul>
    </section>

    <!-- ‚ïê‚ïê‚ïê Cat√°logos TMS ‚ïê‚ïê‚ïê -->
    <section id="catalogs-tms">
      <h2>Cat√°logos TMS</h2>
      <p>Cada cat√°logo incluye filtros espec√≠ficos y su relaci√≥n con cliente y sitio/depositario.</p>
      <ul>
        <li><strong>Country Code</strong>: Country Code, TMS Code, Descripci√≥n. Operaciones CRUD por modal.</li>
        <li><strong>Document Type</strong>: Document Code, Descripci√≥n.</li>
        <li><strong>Unit Measure</strong>: filtros Cliente y Site Depositor; campos Operation Number, Customer Code, Company Code, Unit Code, Peso, Volumen, Moneda.</li>
        <li><strong>Status Code (por tipo)</strong>: asociados con Cliente + Sitio + Interfaz.</li>
      </ul>
    </section>

    <!-- ‚ïê‚ïê‚ïê Par√°metros ‚ïê‚ïê‚ïê -->
    <section id="parameters">
      <h2>Par√°metros</h2>
      <p>Configuraciones personalizadas gestionadas a 3 niveles con modales uniformes.</p>
      <h3>Global (SMTP / Correo)</h3>
      <ul>
        <li>Tipo: Correo. Par√°metros: SMTP_SERVER, SMTP_PORT, SMTP_USER, SMTP_PASSWORD, etc.</li>
        <li>Todos editables mediante modal.</li>
      </ul>
      <h3>Por Cliente</h3>
      <ul>
        <li>Selector Tipo = Cliente + Filtro de Cliente.</li>
        <li>Acci√≥n: ‚ÄúActualizar par√°metros predeterminados‚Äù si est√°n vac√≠os.</li>
      </ul>
      <h3>Por Interfaz (Cliente + Sitio + Interfaz)</h3>
      <ul>
        <li>Selectores dependientes; muestra par√°metros t√©cnicos (rutas, flags de correo, listas de distribuci√≥n).</li>
      </ul>
      <h3>Modal de edici√≥n</h3>
      <ul>
        <li>Nombre de par√°metro (solo lectura) y campo de valor.</li>
        <li>Actualiza mediante procedimiento almacenado.</li>
      </ul>
    </section>

    <!-- ‚ïê‚ïê‚ïê Relaciones entre pantallas ‚ïê‚ïê‚ïê -->
    <section id="relations">
      <h2>Relaciones entre pantallas</h2>
      <ul>
        <li>Cat√°logos TMS/WMS dependen del sistema seleccionado en la vista principal.</li>
        <li>Par√°metros Cliente/Interfaz requieren selecci√≥n previa de cliente (y sitio/interfaz respectivamente).</li>
        <li>La edici√≥n de filas se realiza con modales estandarizados en todas las tablas (validaci√≥n y paginaci√≥n).</li>
      </ul>
    </section>

    <!-- ‚ïê‚ïê‚ïê Integraci√≥n / API ‚ïê‚ïê‚ïê -->
    <section id="integration">
      <h2>Integraci√≥n / API</h2>
      <p>El sistema se integra con servicios .NET 8 mediante un API REST.</p>
      <table>
        <thead><tr><th>Concepto</th><th>Detalle</th></tr></thead>
        <tbody>
          <tr><td>Base URL</td><td><code>https://www.arensodev.com.mx:8600/api</code></td></tr>
          <tr><td>Autenticaci√≥n</td><td>Token de sesi√≥n despu√©s de login.</td></tr>
          <tr><td>Errores</td><td>Devuelven c√≥digos HTTP y mensajes claros.</td></tr>
        </tbody>
      </table>
      <h3>Ejemplo de flujo t√©cnico</h3>
      <ol>
        <li>Login del usuario y emisi√≥n de token de sesi√≥n.</li>
        <li>Subida de archivo y validaci√≥n inicial.</li>
        <li>Procesamiento y almacenamiento transaccional.</li>
        <li>Respuesta con m√©tricas y folios de seguimiento.</li>
      </ol>
    </section>

    <!-- ‚ïê‚ïê‚ïê Administraci√≥n ‚ïê‚ïê‚ïê -->
    <section id="admin">
      <h2>Administraci√≥n</h2>
      <p>Configuraci√≥n del sistema, interfaces, y par√°metros globales.</p>
      <h3>Par√°metros recomendados</h3>
      <ul>
        <li>Tama√±o m√°ximo de archivo y tipos permitidos.</li>
        <li>Horarios de ventana de procesamiento.</li>
        <li>Pol√≠tica de contrase√±as y caducidad.</li>
      </ul>
      <h3>Tareas frecuentes</h3>
      <ul>
        <li>Alta/baja de interfaces por cliente.</li>
        <li>Gesti√≥n de par√°metros por entorno (QA/Prod).</li>
        <li>Revisi√≥n de bit√°coras y auditor√≠a.</li>
      </ul>
      <div class="grid grid-cols-3">
        <figure class="figure-card"><img src="img/c76ec68b-9000-471a-b91a-6d7b123166cd.png" alt="Par√°metros"><figcaption>Par√°metros</figcaption></figure>
        <figure class="figure-card"><img src="img/df2175d5-c82e-44d2-90b4-5cae72170b5e.png" alt="Interfaces"><figcaption>Interfaces</figcaption></figure>
        <figure class="figure-card"><img src="img/de87ae7b-0705-4463-9b8c-49aeb13c871b.png" alt="Seguridad"><figcaption>Seguridad</figcaption></figure>
      </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Soluci√≥n de problemas ‚ïê‚ïê‚ïê -->
    <section id="troubleshooting">
      <h2>Soluci√≥n de Problemas</h2>
      <h3>Errores frecuentes</h3>
      <ul>
        <li>Archivo rechazado: revisa estructura, tipos y duplicados.</li>
        <li>Sin permisos: solicita el rol adecuado al administrador.</li>
        <li>Sesi√≥n expirada: vuelve a iniciar sesi√≥n.</li>
      </ul>
      <h3>Buenas pr√°cticas</h3>
      <ul>
        <li>Valida el archivo con la plantilla antes de subirlo.</li>
        <li>Sube lotes peque√±os para detectar errores m√°s r√°pido.</li>
        <li>Guarda evidencias (capturas) para soporte.</li>
      </ul>
    </section>

    <!-- ‚ïê‚ïê‚ïê Glosario ‚ïê‚ïê‚ïê -->
    <section id="glossary">
      <h2>Glosario</h2>
      <table>
        <thead><tr><th>T√©rmino</th><th>Definici√≥n</th></tr></thead>
        <tbody>
          <tr><td>Interface</td><td>Conjunto de reglas para intercambio de datos entre sistemas.</td></tr>
          <tr><td>Validaci√≥n</td><td>Conjunto de comprobaciones de estructura y negocio.</td></tr>
          <tr><td>Baja l√≥gica</td><td>Desactivaci√≥n sin eliminaci√≥n f√≠sica de datos.</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ‚ïê‚ïê‚ïê Diccionario de datos (plantillas) ‚ïê‚ïê‚ïê -->
    <section id="data-dictionary">
      <h2>Diccionario de Datos (Plantillas)</h2>
      <p>Campos comunes esperados en las plantillas de carga.</p>
      <table>
        <thead><tr><th>Campo</th><th>Tipo</th><th>Obligatorio</th><th>Descripci√≥n</th></tr></thead>
        <tbody>
          <tr><td>ClienteId</td><td>Entero</td><td>S√≠</td><td>Identificador del cliente en el sistema.</td></tr>
          <tr><td>Fecha</td><td>Fecha ISO</td><td>S√≠</td><td>Fecha de la operaci√≥n (UTC).</td></tr>
          <tr><td>Referencia</td><td>Texto</td><td>No</td><td>Referencia externa de negocio.</td></tr>
          <tr><td>Monto</td><td>Decimal</td><td>No</td><td>Valor num√©rico con punto decimal.</td></tr>
        </tbody>
      </table>
      <div class="callout">Este diccionario es ilustrativo. Consulta la plantilla espec√≠fica de cada proceso.</div>
    </section>

    <!-- ‚ïê‚ïê‚ïê Soporte y escalamiento ‚ïê‚ïê‚ïê -->
    <section id="support">
      <h2>Soporte y Escalamiento</h2>
      <h3>Antes de escalar</h3>
      <ul>
        <li>Reproduce el error y captura evidencia (pantallas y archivo de ejemplo).</li>
        <li>Anota fecha/hora, usuario, m√≥dulo y pasos previos.</li>
      </ul>
      <h3>Canales</h3>
      <ul>
        <li>Mesa de Ayuda: crea ticket con prioridad y evidencia.</li>
        <li>Soporte funcional: dudas de negocio o plantillas.</li>
        <li>Soporte t√©cnico: fallas, ca√≠das o rendimiento.</li>
      </ul>
    </section>

    <!-- ‚ïê‚ïê‚ïê FAQ ‚ïê‚ïê‚ïê -->
    <section id="faq">
      <h2>FAQ</h2>
      <h3>¬øQu√© formatos acepta la carga?</h3>
      <p>CSV y XLSX. Descarga la plantilla desde el m√≥dulo de Cargas Manuales.</p>
      <h3>¬øC√≥mo recupero mi contrase√±a?</h3>
      <p>Desde la pantalla de login, usa la opci√≥n ¬´¬øOlvidaste tu contrase√±a?¬ª.</p>
      <h3>¬øCon qui√©n reporto un error?</h3>
      <p>Abre un ticket al √°rea de soporte indicando pasos, pantallas y capturas.</p>
    </section>

  </main>

  <script>
    (function(){
      const sidebar = document.getElementById('sidebar');
      const btnHamburger = document.getElementById('btnHamburger');
      const nav = document.getElementById('navLinks');
      const searchInput = document.getElementById('searchInput');
      // Bot√≥n limpiar b√∫squeda
      const clearBtn = document.createElement('button');
      clearBtn.type = 'button';
      clearBtn.title = 'Limpiar b√∫squeda';
      clearBtn.setAttribute('aria-label','Limpiar b√∫squeda');
      clearBtn.innerHTML = '<span class="material-icons">close</span>';
      document.querySelector('.search-box').appendChild(clearBtn);
      const links = Array.from(nav.querySelectorAll('a'));
      const sections = links.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);

      // Lightbox simple para ampliar im√°genes
      const lb = document.createElement('div');
      lb.className = 'lightbox';
      lb.innerHTML = '<div class="inner"><img alt=""/><div class="caption"></div></div>';
      document.body.appendChild(lb);
      const lbImg = lb.querySelector('img');
      const lbCap = lb.querySelector('.caption');
      function openLightbox(src, caption){
        lbImg.src = src; lbImg.alt = caption || '';
        lbCap.textContent = caption || '';
        lb.classList.add('open');
      }
      function closeLightbox(){ lb.classList.remove('open'); lbImg.src=''; lbCap.textContent=''; }
      lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLightbox(); });
      document.addEventListener('keydown',(e)=>{ if(e.key==='Escape' && lb.classList.contains('open')) closeLightbox(); });
      document.querySelectorAll('.figure-card img').forEach(img=>{
        img.addEventListener('click',()=> openLightbox(img.src, img.alt));
      });

      btnHamburger.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
      });

      // Click en enlaces: activar manualmente
      nav.addEventListener('click', (e) => {
        const anchor = e.target.closest('a');
        if(!anchor) return;
        links.forEach(l => l.classList.remove('active'));
        anchor.classList.add('active');
      });

      // Observador para resaltar secci√≥n activa al hacer scroll
      const observer = new IntersectionObserver((entries)=>{
        const visible = entries
          .filter(en => en.isIntersecting)
          .sort((a,b)=> b.intersectionRatio - a.intersectionRatio)[0];
        if(!visible) return;
        const id = '#' + visible.target.id;
        const current = links.find(l => l.getAttribute('href') === id);
        if(current){
          links.forEach(l => l.classList.remove('active'));
          current.classList.add('active');
        }
      }, { rootMargin: '-40% 0px -55% 0px', threshold: [0, .25, .5, .75, 1] });

      sections.forEach(sec => observer.observe(sec));

      // B√∫squeda simple: filtra enlaces y muestra/oculta secciones
      function normalize(t){return (t||'').toLowerCase().normalize('NFD').replace(/\p{Diacritic}/gu,'');}
      function runSearch(){
        const q = normalize(searchInput.value.trim());
        let firstMatchLink = null;
        links.forEach((a,i)=>{
          const text = normalize(a.innerText);
          const sec = sections[i];
          const match = !q || text.includes(q) || normalize(sec.innerText).includes(q);
          a.style.display = match ? '' : 'none';
          sec.style.display = match ? '' : 'none';
          if(match && !firstMatchLink) firstMatchLink = a;
        });
        if(firstMatchLink){
          firstMatchLink.scrollIntoView({behavior:'smooth', block:'start'});
        }
      }
      searchInput.addEventListener('input', runSearch);
      clearBtn.addEventListener('click', ()=>{ searchInput.value=''; runSearch(); searchInput.focus(); });
    })();
  </script>

</body>
</html>
